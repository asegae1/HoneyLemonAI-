<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>honeylemonai - Image Generator</title>
    <style>
        body { font-family: sans-serif; text-align: center; padding: 20px; background: #fffdf0; }
        .container { max-width: 600px; margin: 0 auto; background: white; padding: 20px; border-radius: 15px; border: 2px solid #FFD700; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .logo { font-weight: 900; font-size: 24px; background: linear-gradient(90deg, #FFD700, #FFA500); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 20px; }
        input { width: 85%; padding: 12px; margin-bottom: 15px; border: 2px solid #eee; border-radius: 25px; outline: none; }
        input:focus { border-color: #FFD700; }
        button { padding: 12px 30px; background: #FFD700; color: #555; border: none; border-radius: 25px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        button:hover { background: #FFA500; color: white; }
        .image-box { margin-top: 20px; min-height: 300px; border: 2px dashed #FFD700; border-radius: 10px; display: flex; align-items: center; justify-content: center; background: #fafafa; overflow: hidden; }
        img { max-width: 100%; height: auto; display: block; }
        .loading-text { color: #FFA500; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <div class="logo">honeylemonai</div>
    <p style="font-size: 13px; color: #666;">プロンプトを入力して画像を生成</p>
    
    <input type="text" id="promptInput" placeholder="例: a cute lemon character, 3d render" value="a cute lemon character">
    <br>
    <button onclick="generateImage()">画像を生成する</button>

    <div class="image-box" id="imageBox">
        <p id="statusText">ここに画像が表示されます</p>
    </div>
</div>

<script>
    function generateImage() {
        const prompt = document.getElementById('promptInput').value;
        const imageBox = document.getElementById('imageBox');

        if (!prompt) {
            alert("プロンプトを入力してください！");
            return;
        }

        // 状態のリセット
        imageBox.innerHTML = '<p class="loading-text">生成中... (10秒ほどかかる場合があります)</p>';

        const seed = Math.floor(Math.random() * 1000000);
        
        // 【修正済み】URLの組み立て。 /p/ を追加し、テンプレートリテラルを修正
        const imageUrl = `https://pollinations.ai/p/${encodeURIComponent(prompt)}?width=1024&height=1024&seed=${seed}&model=flux`;

        const img = new Image();
        img.src = imageUrl;
        img.alt = "Generated AI Image";

        img.onload = function() {
            imageBox.innerHTML = ''; 
            imageBox.appendChild(img);
        };

        img.onerror = function() {
            imageBox.innerHTML = '<p style="color:red;">エラーが発生しました。もう一度試してね！</p>';
        };
    }
</script>

</body>
</html>
