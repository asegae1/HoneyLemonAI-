<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>honeylemonai - DIY Edition</title>
    <style>
        body { font-family: sans-serif; background: #fffdf0; text-align: center; padding: 20px; }
        .box { max-width: 500px; margin: 0 auto; background: white; padding: 20px; border-radius: 20px; border: 3px solid #FFD700; }
        input { width: 80%; padding: 10px; border-radius: 20px; border: 1px solid #ccc; margin-bottom: 10px; }
        button { padding: 10px 20px; border-radius: 20px; border: none; background: #FFD700; font-weight: bold; cursor: pointer; }
        #result { margin-top: 20px; min-height: 200px; display: flex; align-items: center; justify-content: center; background: #eee; border-radius: 10px; overflow: hidden; }
        img { width: 100%; height: auto; display: block; }
        .loader { color: #FFA500; font-weight: bold; }
    </style>
</head>
<body>

<div class="box">
    <h2>honeylemonai 自作機</h2>
    <input type="text" id="p" placeholder="英語で入力（例: lemon cat）" value="lemon cat">
    <br>
    <button onclick="make()">画像を生成</button>

    <div id="result">ここに画像が出るよ</div>
</div>

<script>
    function make() {
        const p = document.getElementById('p').value;
        const res = document.getElementById('result');
        if (!p) return alert("入力してね");

        res.innerHTML = '<p class="loader">生成中...（ブラウザが直接取得中）</p>';

        const seed = Math.floor(Math.random() * 999999);
        // /p/ を含み、${} で変数を展開する「完全な直通URL」
        const url = `https://pollinations.ai/p/${encodeURIComponent(p)}?width=512&height=512&seed=${seed}&model=flux&nologo=true`;

        const img = new Image();
        img.src = url;
        
        img.onload = () => {
            res.innerHTML = '';
            res.appendChild(img);
        };
        
        img.onerror = () => {
            res.innerHTML = '<p style="color:red;">失敗。URLを直接踏んでみて：<br><a href="'+url+'" target="_blank">ここをクリック</a></p>';
        };
    }
</script>

</body>
</html>
